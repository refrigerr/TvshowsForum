<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  <title>Tvshow</title>
</head>
<body>

<div style="margin-top: 15px" class="container">

  <a  th:href="@{/tvshows/{id}(id=${review.tvshow.id})}" class="btn btn-info btn-sm" th:text="'Go back to '+ ${review.getTvshow().getTitle()}">

  </a>



  <h2 style="margin-top: 30px" th:text="'Title of review: '+${review.getTitle()}"></h2>
  <hr>

  <h3>Rating: <span th:text="${review.getRating()}+'/10'"> </span></h3>
  <br>
  <h2>Description: </h2>
  <p style="word-wrap: break-word; width: 500px" th:text="${review.getDescription()}"></p>

  <h2 style="display: inline-block; vertical-align: middle;">Reviews: </h2>
  <a style="float: right; margin-bottom: 10px; " th:href="@{/}"
     class="btn btn-info btn-sm">
    Add comment to this review
  </a>
  <div>
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
      <tr>
        <th>Author</th>
        <th>Comment</th>
        <td>Actions</td>
      </tr>
      </thead>

      <tbody>
      <tr th:each="tempComment : ${review.getComments()}">

        <td th:text="${tempComment.getUser().getUserName()}" />
        <td th:text="${tempComment.getBody()} + '+'" />

        <td>
          <a th:if="${tempComment.getUser().getUserName() == loggedInUser}" th:href="@{/tvshows/showFormForUpdate(tvshowId=${tempReview.getId()})}"
             class="btn btn-info btn-sm">
            Update
          </a>

          <a sec:authorize="hasRole('MODERATOR')" th:href="@{/tvshows/delete(tvshowId=${tempReview.getId()})}"
             class="btn btn-danger btn-sm" onclick="if (!(confirm('Are you sure you want to delete this Review?'))) return false">
            Delete
          </a>

        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

</body>
</html>